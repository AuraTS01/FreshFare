</div>
    <!-- Footer Section Begin -->
    <footer class="footer spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="#" class="footer-logo text-decoration-none">
                                <img src="img/logo.png" alt="Logo" class="logo-img">
                                <span class="logo-text">
                                    <span class="logo-green">F</span><span class="logo-black">resh </span>
                                    <span class="logo-green">F</span><span class="logo-black">are</span>
                                </span>
                            </a>
                        </div>

                        <ul>
                            <li>Address: 278/4A1, Bharathi Estate Part 3, Karamadai, Mettupalayam</li>
                            <li>Phone: +91 87543 64997</li>
                            <li>Email: info@freshfare.in</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                    <div class="footer__widget">
                        <h6>Useful Links</h6>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">About Our Shop</a></li>
                            <li><a href="#" data-bs-toggle="modal" data-bs-target="#secureShoppingModal">Secure Shopping</a></li>
                            <li><a href="#" data-bs-toggle="modal" data-bs-target="#deliveryModal">Delivery Information</a></li>
                            <li><a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a></li>
                            <li><a href="#">Our Sitemap</a></li>
                        </ul>
                        <!-- <ul>
                            <li><a href="#">Who We Are</a></li>
                            <li><a href="./dashboard#">Our Services</a></li>
                            <li><a href="#">Projects</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Innovation</a></li>
                            <li><a href="#">Testimonials</a></li>
                        </ul> -->
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="footer__widget">
                        <h6>Join Our Newsletter Now</h6>
                        <p>Get E-mail updates about our latest shop and special offers.</p>
                        <form action="#">
                            <input type="text" placeholder="Enter your mail">
                            <button type="submit" class="site-btn">Subscribe</button>
                        </form>
                        <div class="footer__widget__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer__copyright">
                        <div class="footer__copyright__text"><p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://aurats.com" target="_blank">Aura Technology Solutions</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p></div>
                        <div class="footer__copyright__payment"><img src="img/payment-item.png" alt=""></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="privacyModal" tabindex="-1">
            <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Fresh Fare Privacy Policy</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        

                        <p>Fresh Fare (‚ÄúCompany,‚Äù ‚Äúwe,‚Äù ‚Äúour,‚Äù or ‚Äúus‚Äù) is committed to protecting the privacy of our customers.
                        This Privacy Policy explains how we collect, use, share, and safeguard your personal information when you use our website, mobile application, or services.</p>

                        <h4>1. Information We Collect</h4>
                        <p><strong>A. Personal Information:</strong> Name, email, phone, address, payment details (processed securely).<br>
                        <strong>B. Order & Transaction Data:</strong> Purchases (meat, fruits, vegetables), order history.<br>
                        <strong>C. Technical Data:</strong> IP address, device type, browsing behavior.</p>
                        
                        <h4>2. Purpose of Processing</h4>
                        <p>We use your information to process orders, improve services, communicate updates, ensure compliance, and prevent fraud.</p>

                        <h4>3. Legal Basis</h4>
                        <p>We process data based on consent, contractual necessity, legal compliance, and legitimate interests.</p>

                        <h4>4. Sharing of Information</h4>
                        <p>We never sell data. We may share it with payment gateways, delivery partners, or regulators if required.</p>

                        <h4>5. Data Protection</h4>
                        <p>We use encryption, secure servers, and restricted access to safeguard your information.</p>

                        <h4>6. Data Retention</h4>
                        <p>Data is kept only as long as needed for orders, compliance, and legal purposes.</p>

                        <h4>7. Your Rights</h4>
                            <p>I. Access and correct your data. <br>
                            II. Request deletion.<br>
                            III. Withdraw consent.<br>
                            IV. Nominate someone to act on your behalf.</p>
                       
                        <h4>8. Cookies & Tracking</h4>
                        <p>We use cookies to improve user experience and analyze usage. You may disable cookies in your browser.</p>

                        <h4>9. Children‚Äôs Privacy</h4>
                        <p>Our services are for users 18+; we do not knowingly collect children‚Äôs data.</p>

                        <h4>10. Food Safety & Order Information</h4>
                        <p>We comply with <strong>FSSAI standards</strong> for handling meat, vegetables, and fruits. 
                        Order data is collected only for fulfilling purchases and regulatory compliance.  
                        </p>

                        <h4>11. Grievance Redressal</h4>
                        <p><strong>Grievance Officer:</strong><br>
                        üìß Email: support@freshfare.in<br>
                        üìû Phone: +91 - 90422 81069</p>

                        <h4>12. Updates</h4>
                        <p>We may update this Privacy Policy from time to time. Changes will be posted here with updated dates.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="deliveryModal" tabindex="-1">
            <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    
                    <div class="modal-header">
                        <h5 class="modal-title">FreshFare Delivery Information</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body">
                        

                        <p>Fresh Fare (‚ÄúCompany,‚Äù ‚Äúwe,‚Äù ‚Äúour,‚Äù or ‚Äúus‚Äù) is committed to providing safe, timely, and reliable delivery of fresh meats to our customers. This Delivery Information Policy outlines our practices regarding order fulfillment, delivery, and related information.</p>

                        <h4>1. Delivery Areas</h4>
                        <p>Fresh Fare delivers only to locations within Karamadai, Mettupalayam & Ooty. Delivery availability may vary depending on location, order size, or product type.</p>

                        <h4>2. Order Processing</h4>
                        <p>Orders are processed once payment is confirmed. We strive to prepare all orders as quickly as possible while maintaining quality and food safety standards. You will receive an order confirmation via email/SMS with details of your order and estimated delivery time.</p>

                        <h4>3. Delivery Schedule</h4>
                        <p>Standard delivery times are between 30 Minutes to 45 Minutes. Orders placed after may be delivered on the next available delivery slot. Delivery slots are subject to availability and may change due to operational constraints.</p>

                        <h4>4. Packaging & Handling</h4>
                        <p>All meat products are carefully packaged to maintain hygiene and freshness. Products are stored in temperature-controlled packaging until delivery. FreshFare follows <strong>FSSAI guidelines</strong> and strict hygiene protocols.</p>

                        <h4>5. Delivery Charges</h4>
                        <p>Delivery charges, if applicable, will be displayed during checkout. Some locations may qualify for free delivery based on minimum order value.</p>

                        <h4>6. Order Tracking</h4>
                        <p>Customers can track their orders via [Website/App link] once the order is confirmed. Real-time updates on delivery status (e.g., dispatched, out for delivery) are provided via SMS/email/app notifications.</p>

                        <h4>7. Delivery Exceptions</h4>
                        <p>Fresh Fare is not responsible for delays due to weather, traffic, or unforeseen circumstances beyond our control. If the delivery cannot be completed due to incorrect address or customer unavailability, additional charges may apply for redelivery.</p>

                        <h4>8. Receiving Orders</h4>
                        <p>Customers should inspect the order upon delivery. For perishable goods like meat, any discrepancies or issues must be reported immediately to [Insert contact email/phone].</p>

                        <h4>9. Cancellation & Returns</h4>
                        <p>Orders can be canceled before the order is dispatched. Due to the perishable nature of meat products, returns or refunds are <strong>not accepted</strong> once the order is dispatched. Exceptions may be made in case of damaged, spoiled, or incorrect items, subject to verification.</p>

                        <h4>10. Safety & Hygiene</h4>
                        <p>Fresh Fare follows strict food safety protocols in compliance with FSSAI standards. Delivery personnel are trained in proper handling of perishable products. All products are delivered at appropriate temperatures to maintain quality and safety.</p>

                        <h4>11. Contact Information</h4>
                        <p>
                            Customer Support: support@freshfare.in<br>
                            Phone: +91 - 87543 64997<br>
                            
                        </p>

                        <h4>12. Updates</h4>
                        <p>Fresh Fare may update this Delivery Information Policy periodically. Updated policies will be published on our website and app with the latest revision date.</p>
                    </div>

                </div>
            </div>
        </div>
        <div class="modal fade" id="secureShoppingModal" tabindex="-1">
            <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title">Fresh Fare Secure Shopping Policy</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body">
                        

                        <p>Fresh Fare (‚ÄúCompany,‚Äù ‚Äúwe,‚Äù ‚Äúour,‚Äù or ‚Äúus‚Äù) is committed to providing a safe and secure shopping experience for all our customers. This Secure Shopping Policy explains the measures we take to protect your personal and payment information when using our website or app.</p>

                        <h4>1. Secure Payment Processing</h4>
                            <p>I. All online payments are processed using secure and trusted payment gateways. <br>
                            II. We never store your full credit/debit card information on our servers.<br>
                            III. Payment transactions are encrypted using industry-standard SSL (Secure Socket Layer) technology.</p>
                            
                      

                        <h4>2. Account Security</h4>
                            <p>A. We encourage customers to use strong, unique passwords for their accounts. <br>
                            B. Enable two-factor authentication (2FA) for added security.<br>
                            C. Do not share login credentials with anyone. Fresh Fare will never ask for your password via email or phone.</p>
                       

                        <h4>3. Personal Information Protection</h4>
                        <p>We protect your personal information, including name, email, address, and phone number, by:</p>
                        <p>--> Using encrypted databases and secure servers.<br>
                            --> Restricting access to authorized personnel only.<br>
                            -->Complying with all applicable data protection laws and regulations.</p>
                       

                        <h4>4. Fraud Prevention</h4>
                        <p>Fresh Fare monitors transactions for unusual activity to prevent fraud and unauthorized access. Suspicious transactions may be temporarily held or verified with the customer before processing.</p>

                        <h4>5. Safe Browsing</h4>
                        <p>* Our website uses HTTPS to ensure secure communication between your browser and our servers. <br>
                            * Cookies and session management are used only for improving your shopping experience and are not shared with third parties for malicious purposes.</p>
                            
                       

                        <h4>6. Order Verification</h4>
                        <p>We may contact customers to verify orders, especially for high-value purchases, to ensure that all orders are legitimate and authorized.</p>

                        <h4>7. Third-Party Services</h4>
                        <p>We use third-party services such as payment gateways and delivery partners. These providers comply with strict security and privacy standards.</p>

                        <h4>8. Customer Responsibility</h4>
                        <p>A. Keep your account information secure and log out after use, especially on shared devices. <br>
                            B. Check emails and communications from Fresh Fare for authenticity before sharing personal information.<br>
                            C. Immediately report any suspicious activity or security concerns to our support team.</p>
                       

                        <h4>9. Updates to Secure Shopping Policy</h4>
                        <p>Fresh Fare may update this Secure Shopping Policy periodically. Changes will be posted on our website and app with the latest revision date.</p>

                        <h4>10. Contact Information</h4>
                        <p>
                            For any security-related queries or concerns: <br>
                            Customer Support: support@freshfare.in<br>
                            Phone: +91 - 90422 81069  <br>
                          
                        </p>

                    </div>

                </div>
            </div>
        </div>

    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> 
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    

    <script>

        function displayAlert(message, icon="‚ö†Ô∏è") {
            document.getElementById("alertMessage").innerText = message;
            document.getElementById("iconBox").innerText = icon;
            document.getElementById("alertBox").style.display = "flex";
        }
        function closePopup() {
            document.getElementById("alertBox").style.display = "none";
        }
    </script>
    <script>
        const modal = document.getElementById("privacyModal"); // modal
        const link = document.getElementById("openModal");     // link
        const closeBtn = document.getElementById("closeModal");

        link.addEventListener('click', () => modal.style.display = "block");
        closeBtn.addEventListener('click', () => modal.style.display = "none");
        window.addEventListener('click', e => {
        if(e.target === modal) modal.style.display = "none";
        });
    </script>

   
    <script>
        // ‚úÖ Add to cart handler
        // ‚úÖ Add to cart handler
        function addToCart(button, name, price, companyId) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            const existingItem = cart.find(item => item.name === name && item.company_id == companyId);

            if (!existingItem) {
                cart.push({
                    name,
                    price,
                    quantity: 1,
                    company_id: companyId
                });
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCartTotal(); // ‚úÖ update totals immediately
                markCartButtons();

                button.innerHTML = `<i class="fa fa-shopping-cart"></i> View Cart`;
                showPopup("success", `${name} has been added to your cart successfully!`);
            } else {
                window.location.href = "shoping-cart";
            }
        }

        function updateCartTotal() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            let total = 0;
            cart.forEach(item => {
                const quantity = item.quantity || 1;
                const pricePerUnit = item.price;
                total += pricePerUnit * quantity;
            });

            const cartTotals = document.querySelectorAll(".cart-total");
            cartTotals.forEach(el => el.textContent = total.toFixed(2));
            
        }


       

        // ‚úÖ Get cart from localStorage
        function getCart() {
            return JSON.parse(localStorage.getItem("cart")) || [];
        }

        // ‚úÖ Save cart to localStorage
        function saveCart(cart) {
            localStorage.setItem("cart", JSON.stringify(cart));
        }
        function showPopup(type, message) {
            const alertBox = document.getElementById("alertBox");
            const msgBox = document.getElementById("alertMessage");
            const iconBox = document.getElementById("iconBox");

            msgBox.innerText = message;

            if (type === "success") {
                iconBox.innerHTML = '<div class="icon success"></div>';
            } else if (type === "error") {
                iconBox.innerHTML = '<div class="icon error"></div>';
            }

            alertBox.classList.add("active");
        }

        // Close popup
        function closePopup() {
            document.getElementById("alertBox").classList.remove("active");
        }



       // ‚úÖ Update all cart count badges
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartCounters = document.querySelectorAll(".cart-count");
            cartCounters.forEach(counter => {
                counter.textContent = cart.length;
            });
        }

        
        // ‚úÖ Mark buttons already in cart
        function markCartButtons() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const buttons = document.querySelectorAll("button[data-product-name]");

            buttons.forEach(button => {
                const productName = button.getAttribute("data-product-name");
                const companyId = button.getAttribute("data-company-id");

                // ‚úÖ Check exact match: product + company
                const alreadyAdded = cart.some(item => item.name === productName && item.company_id == companyId);

                if (alreadyAdded) {
                    button.innerHTML = `<i class="fa fa-shopping-cart"></i> View Cart`;
                    button.classList.remove("btn-success");
                    button.classList.add("btn-success");
                    button.setAttribute("data-added", "true");
                } else {
                    // ‚úÖ Reset to Add to Cart if not in cart
                    button.innerHTML = `<i class="fa fa-shopping-cart"></i> Add to Cart`;
                    button.classList.add("btn-success");
                    button.removeAttribute("data-added");
                }
            });
        }



        // Run once on page load
        document.addEventListener("DOMContentLoaded", function () {
            updateCartCount();
            updateCartTotal();
            markCartButtons(); // must run here too
            updateCartAfterAdd(); // ‚úÖ new
            
            

            const isLocationChecked = localStorage.getItem("locationVerified");
            if (!isLocationChecked) {
                checkUserLocation();
            }
        });

    </script>
    <script>
        function loadCartItems() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartBody = document.getElementById("cartTableBody");
            const cartTotals = document.querySelectorAll(".cart-total");
            cartBody.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                cartBody.innerHTML = '<tr><td colspan="6" class="text-center">Your cart is empty.</td></tr>';
                cartTotals.forEach(el => el.textContent = '0.00');
                markCartButtons();
                return;
            }

            cart.forEach((item, index) => {
                const quantity = item.quantity || 1;
                const pricePerUnit = item.price;
                const itemTotal = pricePerUnit * quantity;
                total += itemTotal;

                const row = document.createElement("tr");
                row.innerHTML = `
                    <td class="shoping__cart__item">
                        <img src="${item.image || 'img/cart/cart-1.jpg'}" alt="" style="width:70px; height:auto;">
                        <h5>${item.name}</h5>
                    </td>
                    <td class="shoping__cart__price">‚Çπ${pricePerUnit.toFixed(2)} /kg</td>
                    <td class="shoping__cart__step text-center">
                        <select onchange="setIncrement(${index}, this.value)" class="form-select form-select-sm cart-select" id="inc-${index}">
                            <option value="1" ${item.increment === 1 ? 'selected' : ''}>1 kg</option>
                            <option value="0.5" ${item.increment === 0.5 ? 'selected' : ''}>0.5 kg</option>
                        </select>
                    </td>
                    <td class="shoping__cart__quantity text-center">
                        <div class="d-flex justify-content-center align-items-center gap-2">
                            <button onclick="updateQuantity(${index}, -1)" class="btn btn-outline-secondary btn-sm">-</button>
                            <input type="text" value="${quantity.toFixed(1)}" id="qty-${index}" class="form-control form-control-sm text-center" style="width: 60px;" readonly>
                            <button onclick="updateQuantity(${index}, 1)" class="btn btn-outline-secondary btn-sm">+</button>
                        </div>
                    </td>
                    <td class="shoping__cart__total">‚Çπ${itemTotal.toFixed(2)}</td>
                    <td class="shoping__cart__item__close">
                        <button class="btn btn-sm btn-danger" onclick="removeItem(${index})">Remove</button>
                    </td>
                `;
                cartBody.appendChild(row);
            });

            cartTotals.forEach(el => el.textContent = total.toFixed(2));
            markCartButtons(); // ‚úÖ update buttons after table loads
        }

        // ‚úÖ Run on page load
        document.addEventListener("DOMContentLoaded", function() {
            loadCartItems();     // Populate checkout table
            updateCartCount();   // Header cart count
            updateCartTotal();   // Cart total price
            markCartButtons();   // Update Add to Cart / View Cart buttons
            updateCartAfterAdd()
            
        });




    function updateQuantity(index, change) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const item = cart[index];
        const increment = item.increment || 1;

        let newQty = (item.quantity || 1) + (change * increment);
        if (newQty < increment) newQty = increment;

        item.quantity = parseFloat(newQty.toFixed(1));
        cart[index] = item;
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCartItems();
    }

    function setIncrement(index, value) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart[index].increment = parseFloat(value);
        localStorage.setItem("cart", JSON.stringify(cart));
    }

    function removeItem(index) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCartItems();
    }

    loadCartItems();
    </script>
    <script>
       
        function checkUserLocation() {
            if (!navigator.geolocation) {
            showPincodeModal();
            return;
            }

            navigator.geolocation.getCurrentPosition(success, error);

            function success(position) {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                const apiKey = "AIzaSyAug-QPQ5ScQHB_OzuIZsy_zJhjrw_uRFM"; // Replace with your key

                fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${apiKey}`)
                    .then(response => response.json())
                    .then(data => {
                    const components = data.results[0].address_components;
                    let foundLocality = "";

                    for (const comp of components) {
                        if (
                        comp.types.includes("locality") ||
                        comp.types.includes("administrative_area_level_2")
                        ) {
                        foundLocality = comp.long_name.toLowerCase();
                        break;
                        }
                    }

                    if (
                        foundLocality.includes("mettupalayam") ||
                        foundLocality.includes("karamadai")
                    ) {
                        showAlert(`<strong>Delivery available</strong> in your area (${foundLocality})`, "success");
                        localStorage.setItem("locationVerified", "true");
                    } else {
                        // location found but NOT serviceable
                        showPincodeModal();
                    }
                    })
                    .catch(() => {
                    // API error or bad response
                    showPincodeModal();
                    });
            }

            function error() {
            // Location blocked or denied
            showPincodeModal();
            }
        }

        function showAlert(message, type = 'warning') {
            const alertBox = document.getElementById("locationAlert");
            alertBox.className = `alert alert-${type} text-center`;
            alertBox.innerHTML = message;
            alertBox.style.display = "block";

            // Optional: auto-dismiss after 5s
            setTimeout(() => {
            alertBox.style.display = "none";
            }, 5000);
        }

        function showPincodeModal() {
            const modal = new bootstrap.Modal(document.getElementById('pincodeModal'));
            modal.show();
        }

        function verifyPincode() {
            const validPincodes = ['641301', '641302', '641104'];
            const userPin = document.getElementById("pincodeInput").value.trim();
            const errorBox = document.getElementById("pincodeError");

            if (validPincodes.includes(userPin)) {
                errorBox.style.display = "none";

                const modalEl = document.getElementById('pincodeModal');
                const modalInstance = bootstrap.Modal.getInstance(modalEl);
                if (modalInstance) {
                modalInstance.hide();
                }

                // Wait 300ms to allow Bootstrap to finish hiding, then clean up
                setTimeout(() => {
                // Remove modal-open class
                document.body.classList.remove("modal-open");

                // Remove any leftover backdrops
                document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());

                // Remove inline overflow styles
                document.body.style.overflow = 'auto';
                document.body.style.paddingRight = '0';

                // Set flag to avoid location check again
                localStorage.setItem("locationVerified", "true");

                // Show success message
                showAlert(`<strong>Delivery available</strong> in your area (${userPin})`, "success");
                }, 300);
            } else {
                errorBox.style.display = "block";
            }
        }


        function resetLocationCheck() {
            localStorage.removeItem("locationVerified");
            location.reload();
        }

       
        

        
    </script>
    
    <script>
        let cartTotal = 0; // global variable to hold total

        function renderOrderSummary() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const orderList = document.getElementById("orderItems");

            // Use classes instead of single IDs
            const subtotalElements = document.querySelectorAll(".cart-subtotal");
            const gstElements = document.querySelectorAll(".cart-gst");
            const cartTotals = document.querySelectorAll(".cart-total");

            orderList.innerHTML = "";
            let subtotal = 0;

            cart.forEach(item => {
                const qty = item.quantity || 1;
                const itemTotal = item.price * qty;

                const li = document.createElement("li");
                li.innerHTML = `${item.name} √ó ${qty} Kg <span>‚Çπ${itemTotal.toFixed(2)}</span>`;
                orderList.appendChild(li);

                subtotal += itemTotal;
            });

            const gstRate = 0.00; // 5% GST
            const gstAmount = subtotal * gstRate;
            const total = subtotal + gstAmount;

            // Update all .cart-subtotal elements
            subtotalElements.forEach(el => {
                el.textContent = `‚Çπ${subtotal.toFixed(2)}`;
            });

            // Update all .cart-gst elements
            gstElements.forEach(el => {
                el.textContent = `‚Çπ${gstAmount.toFixed(2)}`;
            });

            // Update all .cart-total elements
            cartTotals.forEach(el => {
                el.textContent = `‚Çπ${total.toFixed(2)}`;
            });

            cartTotal = total; // store total globally
        }



        document.addEventListener("DOMContentLoaded", renderOrderSummary);




    </script>
    <script>
        // Dummy placeholders (replace with real data if available)
        const customerInfo = {
            name: localStorage.getItem('customerName') || "John Doe",
            phone: localStorage.getItem('customerPhone') || "9876543210",
            address: localStorage.getItem('customerAddress') || "123, Main Street, Mettupalayam"
        };

        const cart = JSON.parse(localStorage.getItem("cart")) || [];

        function generateOrderId() {
            return "ORD" + Date.now().toString().slice(-6);
        }

        
        function renderOrderDetails() { 
            document.getElementById("orderId").textContent = generateOrderId(); 
            document.getElementById("customerName").textContent = customerInfo.name; 
            document.getElementById("customerPhone").textContent = customerInfo.phone; 
            document.getElementById("customerAddress").textContent = customerInfo.address; 
            const itemList = document.getElementById("orderedItemsList"); 
            let subtotal = 0; 
            cart.forEach(item => { const quantity = item.quantity || 1; 
                const itemTotal = item.price * quantity; 
                subtotal += itemTotal; 
                const li = document.createElement("li"); 
                li.className = "list-group-item d-flex justify-content-between align-items-center"; 
                li.innerHTML = `${item.name} √ó ${quantity} Kg <span>‚Çπ${itemTotal.toFixed(2)}</span>`;
                itemList.appendChild(li); }); 
                document.getElementById("subtotal").textContent = subtotal.toFixed(2); 
                document.getElementById("total").textContent = subtotal.toFixed(2); 
        } 
        document.addEventListener("DOMContentLoaded", renderOrderDetails);
    </script>
    <script>
    

        const devNotice = document.getElementById("devNotice");
        const codSection = document.getElementById("codSection");

        // üü¢ Embed PHP session values for customer
        const customerName = "<?= addslashes($_SESSION['username'] ?? 'Customer') ?>";
        const customerEmail = "<?= addslashes($_SESSION['email'] ?? 'customer@example.com') ?>";
        const customerContact = "<?= addslashes($_SESSION['mob_num'] ?? '9876543210') ?>";

        // Toggle payment method visibility
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener("change", () => {
                const selected = radio.value;
                if (selected === "cod") {
                    codSection.classList.remove("d-none");
                    devNotice.classList.add("d-none");
                } else {
                    devNotice.classList.remove("d-none");
                    codSection.classList.add("d-none");
                }
            });
        });

        // üü¢ Place Order Submit Handler
        // üü¢ Place Order Submit Handler
        document.getElementById("paymentForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const selectedRadio = document.querySelector("input[name='paymentMethod']:checked");

            if (!selectedRadio) {
                displayAlert("Please select a payment method before proceeding.", "‚ö†Ô∏è");
                return;
            }

            const selected = selectedRadio.value;
            const cart = JSON.parse(localStorage.getItem("cart")) || [];

            // ‚úÖ Get final total (after coupon & GST)
            calculateCartTotal(); // make sure totals are updated
            const finalTotal = parseFloat(localStorage.getItem("finalTotal")) || 0;

            if (selected === "cod") {
                codSection.classList.remove("d-none");
                devNotice.classList.add("d-none");

                // ‚úÖ COD Flow
                fetch("database.php?action=save_order", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        payment_mode: "cod",
                        cart: cart,
                        total_amount: finalTotal   // üü¢ send discounted price
                    })
                })
                .then(res => res.json())
                .then(data => {
                    if (data.status === "success") {
                        localStorage.setItem("latest_order_id", data.order_id);
                        localStorage.removeItem("cart");
                        localStorage.removeItem("appliedCoupon"); // reset coupon
                        window.location.href = "order_summary";
                    } else {
                        displayAlert("Failed to place order: " + data.message, "‚ùå");
                    }
                })
                .catch(err => {
                    console.error("Order error:", err);
                    displayAlert("Something went wrong. Please try again.", "‚ö†Ô∏è");
                });
            } 

            else if (selected === "razorpay") {
                const options = {
                    "key": "rzp_live_RF78uExNtRB1Cq",
                    "amount": finalTotal * 100, // ‚úÖ discounted value in paise
                    "currency": "INR",
                    "name": "Fresh Fare",
                    "description": "Order Payment",
                    "image": "./img/logo.png",
                    "handler": function (response) {
                        // ‚úÖ save order on success
                        fetch("database.php?action=save_order", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                payment_mode: "razorpay",
                                payment_id: response.razorpay_payment_id,
                                cart: cart,
                                total_amount: finalTotal  // üü¢ send discounted price
                            })
                        })
                        .then(res => res.json())
                        .then(data => {
                            if (data.status === "success") {
                                localStorage.setItem("latest_order_id", data.order_id);
                                localStorage.removeItem("cart");
                                localStorage.removeItem("appliedCoupon"); // reset coupon
                                window.location.href = "order_summary";
                            } else {
                                displayAlert("Failed to place order: " + data.message, "‚ùå");
                            }
                        });
                    },
                    "prefill": {
                        "name": customerName,
                        "email": customerEmail,
                        "contact": customerContact
                    },
                    "theme": { "color": "#3399cc" }
                };

                const rzp1 = new Razorpay(options);
                rzp1.open();
            }
        });


    </script>

    <script>
        // Redirect if not logged in
        function checkLoginBeforeCheckout() {
            if (!isLoggedIn) {
                alert("Please log in to continue with the checkout.");
                window.location.href = "./login.php"; // PHP login page
                return false;
            }
            return true;
        }

        // Auto-check on checkout page
         
    </script>

    <script>
        const loginForm = document.getElementById("loginForm");
        const alertBox = document.getElementById("loginAlert");

        loginForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        // Simple validation (replace with server-side validation in production)
        if (username === "admin" && password === "123456") {
            localStorage.setItem("isLoggedIn", "true");
            localStorage.setItem("userName", username);

            // Redirect to homepage or checkout
            window.location.href = "./index"; // Change to checkout.html if needed
        } else {
            alertBox.textContent = "Invalid credentials. Please try again.";
            alertBox.classList.remove("d-none");
        }
        });
    </script>

    <script>
        const chkChicken = document.getElementById('chkChicken');
        const chickenOptions = document.getElementById('chickenOptions');

        chkChicken.addEventListener('change', () => {
            chickenOptions.style.display = chkChicken.checked ? 'block' : 'none';
        });

        function generateDefaultPassword() {
            document.getElementById("password").value = "Password";
        }
    </script>
    <script>
      // Insert PHP message into popup
      document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("alertMessage").innerText = 
          "<?php echo htmlspecialchars($msg, ENT_QUOTES); ?>";
        document.getElementById("alertBox").classList.add("active");
      });
      function closePopup() {
        document.getElementById("alertBox").classList.remove("active");
      }
    </script>
    
    <script>
        $(document).ready(function() {
            $("#searchForm").on("submit", function(e) {
                e.preventDefault(); // prevent reload
                $("#searchInput").autocomplete("search"); // trigger autocomplete
            });

            $("#searchInput").autocomplete({
                source: function(request, response) {
                    $.ajax({
                        url: 'index.php',
                        type: 'GET',
                        dataType: 'json',
                        data: {
                            ajax_item_suggest: 1,
                            term: request.term
                        },
                        success: function(data) {
                            response(data);
                        }
                    });
                },
                minLength: 2,
                select: function(event, ui) {
                    $("#searchInput").val(ui.item.value);
                    // scroll to product section
                    document.getElementById('targetSection').scrollIntoView({ behavior: 'smooth' });
                    return false;
                }
            });
        });
        </script>

    



    
    
    
   <script>
        let ringingOrderIds = new Set();
        let alarmAudio = document.getElementById("orderAlert");
        alarmAudio.loop = true;
        let ordersData = []; // store fetched orders
        let currentPage = 1;
        const rowsPerPage = 5;

        const companyId = document.getElementById("companyId").value;

        function renderOrders() {
            let tbody = document.getElementById("ordersBody");
            let noOrdersMsg = document.getElementById("noOrdersMsg");
            tbody.innerHTML = "";

            if (ordersData.length === 0) {
                noOrdersMsg.style.display = "block";
                document.getElementById("pageInfo").textContent = "";
                return;
            } else {
                noOrdersMsg.style.display = "none";
            }

            let start = (currentPage - 1) * rowsPerPage;
            let end = start + rowsPerPage;
            let pageOrders = ordersData.slice(start, end);

            pageOrders.forEach(order => {
                let tr = document.createElement("tr");

                let btnLabel = "";
                let nextStatus = "";
                let disabled = "";

                if (order.status === "pending") {
                    btnLabel = "Acknowledge";
                    nextStatus = "acknowledged";
                } else if (order.status === "acknowledged") {
                    btnLabel = "Order Ready & Ready to Dispatch";
                    nextStatus = "dispatched";
                } else if (order.status === "dispatched") {
                    btnLabel = "Dispatched ‚úÖ";
                    disabled = "disabled";
                }

                let itemsHtml = "<ul class='item-list text-muted small'>";
                order.items.forEach(it => {
                    itemsHtml += `<li>${it.item_name} (${parseFloat(it.quantity)} ${it.unit}) ‚Äì ‚Çπ${parseFloat(it.price).toFixed(2)}</li>`;
                });
                itemsHtml += "</ul>";

                tr.innerHTML = `
                    <td>
                        <div class="fw-semibold">#${order.order_code}</div>
                        <div><span class="badge bg-warning text-dark">${order.status}</span></div>
                    </td>
                    <td>
                        <div class="fw-semibold">${order.customer_name}</div>
                        <div class="text-muted small">${order.mob_num}</div>
                        <div class="text-muted small">${order.payment_mode}</div>
                    </td>
                    <td>${itemsHtml}</td>
                    <td>‚Çπ${parseFloat(order.total_price).toFixed(0)}</td>
                    <td>${order.order_date}</td>
                    <td>
                        <button onclick="updateOrderStatus(${order.order_id}, '${nextStatus}')" 
                                id="btn-${order.order_id}" 
                                class="btn btn-outline-primary btn-sm" ${disabled}>
                            ${btnLabel}
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            let totalPages = Math.ceil(ordersData.length / rowsPerPage);
            document.getElementById("pageInfo").textContent = `Page ${currentPage} of ${totalPages}`;
            document.getElementById("prevBtn").disabled = currentPage === 1;
            document.getElementById("nextBtn").disabled = currentPage === totalPages;
        }
            
        function checkNewOrders() {
            // alert(companyId);
            fetch("database.php", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: "fetch_orders=1&company_id=" + companyId
            })
                .then(res => res.json())
                .then(orders => {
                    ordersData = orders;
                    renderOrders();
                    let hasPending = orders.some(o => o.status === "pending");
                    if (hasPending) {
                        if (alarmAudio.paused) alarmAudio.play();
                    } else {
                        alarmAudio.pause();
                        alarmAudio.currentTime = 0;
                    }
                })
                .catch(err => console.error(err));
        }

        function updateOrderStatus(orderId, status) {
            fetch("database.php", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: "update_order=1&order_id=" + orderId + "&status=" + encodeURIComponent(status)
            })
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        checkNewOrders();
                    } else {
                        alert(data.message);
                    }
                })
                .catch(err => console.error(err));
        }

        // Pagination controls
        document.getElementById("prevBtn").addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                renderOrders();
            }
        });
        document.getElementById("nextBtn").addEventListener("click", () => {
            let totalPages = Math.ceil(ordersData.length / rowsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderOrders();
            }
        });

        // Auto-refresh
        setInterval(checkNewOrders, 3000);
       
    </script>

    <script>
        const companyId_1 = document.getElementById("companyId").value;
        function fetchDispatchedOrders() {
            fetch("database.php", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: "fetch_dispatched=1&company_id=" + companyId_1
            })
            .then(res => res.json())
            .then(orders => {
                let tbody = document.getElementById("dispatchedBody");
                tbody.innerHTML = "";

                if (orders.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center text-muted py-3">
                                No dispatched orders found
                            </td>
                        </tr>`;
                } else {
                    orders.forEach(order => {
                        let itemsHtml = "<ul class='item-list text-muted small'>";
                        order.items.forEach(it => {
                            itemsHtml += `
                                <li>
                                    ${it.item_name} (${parseFloat(it.quantity)} ${it.unit}) ‚Äì ‚Çπ${parseFloat(it.price).toFixed(2)}
                                    <span class="badge bg-success">${it.pickup_status}</span>
                                </li>`;
                        });
                        itemsHtml += "</ul>";

                        let tr = `
                            <tr>
                                <td><div class="fw-semibold">#${order.order_code}</div></td>
                                <td>
                                    <div class="fw-semibold">${order.customer_name}</div>
                                    <div class="text-muted small">${order.mob_num}</div>
                                    <div class="text-muted small">${order.payment_mode}</div>
                                </td>
                                <td>${itemsHtml}</td>
                                <td>‚Çπ${parseFloat(order.total_price).toFixed(2)}</td>
                                <td>${order.order_date}</td>
                                <td><span class="badge bg-success">${order.status}</span></td>
                            </tr>
                        `;
                        tbody.innerHTML += tr;
                    });
                }

                // initialize DataTable (or refresh it)
                if ($.fn.DataTable.isDataTable('#dispatchedTable')) {
                    $('#dispatchedTable').DataTable().clear().destroy();
                }
                $('#dispatchedTable').DataTable({
                    pageLength: 5,
                    lengthMenu: [5, 10, 20, 50],
                    responsive: true
                });
            })
            .catch(err => console.error(err));
        }

        document.addEventListener("DOMContentLoaded", function () {
            checkNewOrders();
            fetchDispatchedOrders();
            checkUserLocation();
        });


    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const proceedBtn = document.querySelector(".checkout__order a.primary-btn"); // Proceed to payment link
            const zipInput = document.getElementById("zipCode");
            const alertDiv = document.getElementById("zipAlert");

            const validPincodes = ['641104', '641301', '641305'];

            proceedBtn.addEventListener("click", function(e) {
                if (!validPincodes.includes(zipInput.value.trim())) {
                    e.preventDefault(); // prevent going to payment
                    alertDiv.innerHTML = '<div class="alert alert-info">Please choose a valid location Pincode. We Serve only for Karamadai and Mettupalayam Locations.</div>';
                    alertDiv.scrollIntoView({ behavior: 'smooth' }); // scroll to message
                } else {
                    alertDiv.innerHTML = ''; // clear previous message if valid
                }
            });
        });

    </script>
    <script>
        // Populate modal fields when button is clicked
        document.querySelectorAll('.change-category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const email = this.getAttribute('data-email');
                const name = this.getAttribute('data-name');
                const phone = this.getAttribute('data-phone');
                const category = this.getAttribute('data-category');

                document.getElementById('modalEmail').value = email;
                document.getElementById('modalName').value = name;
                document.getElementById('modalPhone').value = phone;
                document.getElementById('modalCategory').value = category;
            });
        });
    </script>

    <script>
        $(document).ready(function() {
            $('#usersTable').DataTable({
                responsive: true,   // makes table responsive
                pageLength: 10,     // rows per page
                lengthMenu: [5, 10, 25, 50],
                columnDefs: [
                    { orderable: false, targets: 5 } // disable sorting on Action column
                ]
            });
        });
    </script>
    <script>
        const maxUses = 3253; // max coupon uses
        const couponCode = "SAVE25"; // your coupon code
        document.getElementById("showCouponBox").addEventListener("click", function(e) {
            e.preventDefault();
            const box = document.getElementById("couponBox");
            box.style.display = box.style.display === "none" ? "block" : "none";
            document.getElementById("couponInput").focus();
        });

        // Function to calculate subtotal, GST, and total
        function calculateCartTotal() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            let subtotal = 0;

            cart.forEach(item => {
                const qty = item.quantity || 1;
                subtotal += item.price * qty;
            });

            // üü¢ Check coupon status
            const appliedCoupon = localStorage.getItem("appliedCoupon") === "true";

            // Apply coupon if valid
            if (appliedCoupon) {
                subtotal = subtotal * 0.75; // 25% off
            }

            const gst = subtotal * 0.00;
            const total = subtotal + gst;

            // Update DOM
            document.querySelectorAll(".cart-subtotal").forEach(el => {
                el.textContent = "‚Çπ" + subtotal.toFixed(2);
            });

            document.querySelectorAll(".cart-gst").forEach(el => {
                el.textContent = "‚Çπ" + gst.toFixed(2);
            });

            document.querySelectorAll(".cart-total").forEach(el => {
                el.textContent = "‚Çπ" + total.toFixed(2);
            });

            // Save final total for checkout
            localStorage.setItem("finalTotal", total.toFixed(2));
        }





        // Call this function after adding item to cart
        function updateCartAfterAdd() {
            calculateCartTotal(); // no discount yet
        }

        // Apply coupon
        document.getElementById("applyCoupon").addEventListener("click", function () {
            const input = document.getElementById("couponInput").value.trim();
            const message = document.getElementById("couponMessage");

            
            let usedCoupons = parseInt(localStorage.getItem("usedCoupons")) || 0;

            if (input === couponCode) {
                if (usedCoupons < maxUses) {
                    localStorage.setItem("appliedCoupon", "true"); // mark coupon applied
                    calculateCartTotal(); // recalc with discount
                    message.style.color = "green";
                    message.textContent = "Coupon applied! 25% discount granted.";
                    usedCoupons++;
                    localStorage.setItem("usedCoupons", usedCoupons);
                } else {
                    message.style.color = "red";
                    message.textContent = "Sorry, this coupon has expired.";
                }
            } else {
                message.style.color = "red";
                message.textContent = "Invalid coupon code.";
            }

        });

        localStorage.removeItem("appliedCoupon");

    </script>

    
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
        // ‚úÖ Initialize Swiper
        const swiper = new Swiper('.hero-slider', {
            loop: true,
            autoplay: {
            delay: 4000,
            disableOnInteraction: false,
            },
            pagination: {
            el: '.swiper-pagination',
            clickable: true,
            },
            navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
            },
            effect: 'slide', // can change to "fade" or "cube"
            speed: 800,
        });

        // ‚úÖ Replace background images
        document.querySelectorAll(".set-bg").forEach(el => {
            const bg = el.getAttribute("data-setbg");
            if(bg) el.style.backgroundImage = `url(${bg})`;
        });
    </script>




</body>

</html>